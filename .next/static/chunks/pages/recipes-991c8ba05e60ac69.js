(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{458:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/recipes",function(){return r(4177)}])},4177:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var t=r(5893),a=r(7294),l=r(1163),i=r(5876);function n(e){let{recipe:s,onSave:r,onClick:a}=e;if(!s)return null;let{title:l,description:i,prepTime:n,cookTime:o,servings:c,macros:d,tags:x}=s,m=(n||0)+(o||0);return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:a,children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:l}),r&&(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),r(s)},className:"text-primary hover:text-primary-dark","aria-label":"Save recipe",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),i&&(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:i}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4 text-sm text-gray-600",children:[m>0&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),m," min"]}),c&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),c," servings"]})]}),d&&(0,t.jsxs)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Calories"}),(0,t.jsx)("div",{className:"text-sm font-semibold",children:d.calories})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Protein"}),(0,t.jsxs)("div",{className:"text-sm font-semibold",children:[d.protein,"g"]})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Carbs"}),(0,t.jsxs)("div",{className:"text-sm font-semibold",children:[d.carbs,"g"]})]}),(0,t.jsxs)("div",{className:"text-center p-2 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"text-xs text-gray-600",children:"Fat"}),(0,t.jsxs)("div",{className:"text-sm font-semibold",children:[d.fat,"g"]})]})]}),x&&x.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:x.slice(0,3).map((e,s)=>(0,t.jsx)("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs rounded-full",children:e},s))})]})})}var o=r(6727),c=r(1158);function d(e){let{user:s}=e,r=(0,l.useRouter)(),[d,x]=(0,a.useState)([]),[m,h]=(0,a.useState)(!0),[u,p]=(0,a.useState)(""),[g,v]=(0,a.useState)(null),{isOnline:j}=(0,c.kH)(),f=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!s){r.push("/");return}(async()=>{if(!f.current){f.current=!0;try{let e=await (0,o.V4)(s.uid);x(e)}catch(e){console.error("Error loading recipes:",e)}finally{h(!1)}}})()},[s,r]);let b=async e=>{p(e),h(!0);try{if(e.trim()){let r=await (0,o.s8)(s.uid,e);x(r)}else{let e=await (0,o.V4)(s.uid);x(e)}}catch(e){console.error("Error searching recipes:",e)}finally{h(!1)}},N=async e=>{try{await (0,o.eI)(e),x(d.filter(s=>s.id!==e)),v(null)}catch(e){console.error("Error deleting recipe:",e)}};return s?(0,t.jsx)(i.Z,{user:s,currentPage:"recipes",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Recipes"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Your saved recipes are stored locally for offline access"})]}),!j&&(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4 flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsx)("span",{className:"text-sm text-blue-700",children:"You're offline. Showing cached recipes from your device."})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:u,onChange:e=>b(e.target.value),placeholder:"Search recipes by name, tag, or ingredient...",className:"w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"}),(0,t.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),m?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading recipes..."})]}):0===d.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,t.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),u?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No recipes found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Try a different search term"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"No saved recipes yet"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Generate recipes from your pantry to save them here"}),(0,t.jsx)("button",{onClick:()=>r.push("/pantry"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Go to Pantry"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:[d.length," recipe",1!==d.length?"s":""," saved"]}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(e=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(n,{recipe:e,onClick:()=>r.push("/recipe/".concat(e.id))}),(0,t.jsx)("button",{onClick:()=>v(e.id),className:"absolute top-4 right-4 p-2 bg-white rounded-full shadow-md hover:bg-red-50 transition-colors","aria-label":"Delete recipe",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 text-xs text-gray-400 bg-white/80 px-2 py-1 rounded",children:["Saved ",new Date(e.savedAt).toLocaleDateString()]})]},e.id))})]}),g&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Delete Recipe?"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"This will remove the recipe from your saved recipes. This action cannot be undone."}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>N(g),className:"flex-1 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"Delete"}),(0,t.jsx)("button",{onClick:()=>v(null),className:"flex-1 border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})})]})}):null}},1163:function(e,s,r){e.exports=r(3079)}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=458)}),_N_E=e.O()}]);