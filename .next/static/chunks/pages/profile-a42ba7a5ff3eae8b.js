(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return s(9441)}])},5876:function(e,r,s){"use strict";s.d(r,{Z:function(){return u}});var n=s(5893),a=s(1163),l=s(2753),t=s(8232),i=s(7294);function o(e){let{user:r,currentPage:s=""}=e,o=(0,a.useRouter)(),[c,d]=(0,i.useState)(!1),u=async()=>{try{await (0,l.w7)(t.I8),o.push("/")}catch(e){console.error("Sign out error:",e)}},m=[{name:"Home",href:"/",current:"home"===s},{name:"Recipes",href:"/recipes",current:"recipes"===s,requiresAuth:!0},{name:"Pantry",href:"/pantry",current:"pantry"===s,requiresAuth:!0},{name:"Planner",href:"/planner",current:"planner"===s,requiresAuth:!0},{name:"Tracker",href:"/tracker",current:"tracker"===s,requiresAuth:!0},{name:"Profile",href:"/profile",current:"profile"===s,requiresAuth:!0}].filter(e=>!e.requiresAuth||r),x=e=>{d(!1),o.push(e)};return(0,n.jsxs)("nav",{className:"bg-white shadow-sm",children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)("button",{onClick:()=>x("/"),className:"text-2xl font-bold text-primary hover:text-primary/90 transition-colors",children:"ChefWise"})}),(0,n.jsxs)("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[m.map(e=>(0,n.jsx)("button",{onClick:()=>x(e.href),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(e.current?"bg-primary/10 text-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:e.name},e.name)),r?(0,n.jsx)("button",{onClick:u,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Sign Out"}):(0,n.jsx)("button",{onClick:()=>o.push("/"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Get Started"})]}),(0,n.jsx)("div",{className:"flex md:hidden",children:(0,n.jsxs)("button",{type:"button",onClick:()=>d(!c),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-primary hover:bg-gray-100 transition-colors","aria-expanded":"false",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),c?(0,n.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):(0,n.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]})})]})}),c&&(0,n.jsx)("div",{className:"md:hidden",children:(0,n.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[m.map(e=>(0,n.jsx)("button",{onClick:()=>x(e.href),className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(e.current?"bg-primary/10 text-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:e.name},e.name)),r&&(0,n.jsx)("button",{onClick:u,className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors",children:"Sign Out"})]})})]})}var c=s(1158);function d(){let{isOnline:e,pendingSyncCount:r,isSyncing:s,syncError:a,manualSync:l,clearSyncError:t}=(0,c.kH)();return!e||0!==r||a||s?s?(0,n.jsx)("div",{className:"bg-yellow-500 text-white px-4 py-2 text-center text-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,n.jsx)("span",{children:"Syncing changes..."})]})}):a?(0,n.jsx)("div",{className:"bg-red-500 text-white px-4 py-2 text-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsxs)("span",{children:["Sync error: ",a]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:l,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Retry"}),(0,n.jsx)("button",{onClick:t,className:"p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Dismiss",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}):e?r>0?(0,n.jsx)("div",{className:"bg-amber-500 text-white px-4 py-2 text-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,n.jsxs)("span",{children:[r," pending"," ",1===r?"change":"changes"," to sync"]})]}),(0,n.jsx)("button",{onClick:l,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Sync Now"})]})}):null:(0,n.jsx)("div",{className:"bg-red-600 text-white px-4 py-2 text-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a5 5 0 01-7.072-7.072m0 0l2.829 2.829M3 3l2.829 2.829m0 0a5 5 0 017.072 0"})}),(0,n.jsxs)("span",{children:["You're offline",r>0&&(0,n.jsxs)("span",{className:"ml-1",children:["(",r," pending"," ",1===r?"change":"changes",")"]})]})]}),(0,n.jsx)("span",{className:"text-xs opacity-80",children:"Changes will sync when online"})]})}):null}function u(e){let{children:r,user:s,currentPage:a=""}=e;return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)(d,{}),(0,n.jsx)(o,{user:s,currentPage:a}),(0,n.jsx)("main",{children:r})]})}},9441:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return u}});var n=s(5893),a=s(7294),l=s(1163),t=s(9724),i=s(2753),o=s(8232);let c={mediterranean:"Mediterranean diet - emphasis on olive oil, fish, vegetables, whole grains",vegan:"Vegan - no animal products",vegetarian:"Vegetarian - no meat or fish",keto:"Ketogenic - very low carb, high fat",paleo:"Paleo - no grains, legumes, or dairy","low-fat":"Low fat - limit fat to 20-30% of calories","low-sugar":"Low sugar - minimize added sugars and high glycemic foods","low-sodium":"Low sodium - limit sodium intake",nafld:"NAFLD-friendly - low fat, low sugar, anti-inflammatory",gallbladder:"Gallbladder-friendly - low fat, avoid triggers",gluten_free:"Gluten-free - no wheat, barley, rye",dairy_free:"Dairy-free - no milk products"};var d=s(5876);function u(e){var r,s,u,m,x,h,p;let{user:g}=e,f=(0,l.useRouter)(),[y,b]=(0,a.useState)(null),[v,j]=(0,a.useState)(!0),[N,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!g){f.push("/");return}(async()=>{try{let e=await (0,t.QT)((0,t.JU)(o.db,"users",g.uid));e.exists()&&b(e.data())}catch(e){console.error("Error loading profile:",e)}finally{j(!1)}})()},[g,f]);let k=async e=>{e.preventDefault(),w(!0);try{await (0,t.r7)((0,t.JU)(o.db,"users",g.uid),y),alert("Profile updated successfully!")}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile")}finally{w(!1)}},C=async()=>{try{await (0,i.w7)(o.I8),f.push("/")}catch(e){console.error("Sign out error:",e)}};return!g||v?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:"Loading..."}):(0,n.jsx)(d.Z,{user:g,currentPage:"profile",children:(0,n.jsx)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Profile Settings"}),(0,n.jsxs)("form",{onSubmit:k,children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Basic Information"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),(0,n.jsx)("input",{type:"text",value:(null==y?void 0:y.displayName)||"",onChange:e=>b({...y,displayName:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,n.jsx)("input",{type:"email",value:(null==y?void 0:y.email)||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 cursor-not-allowed"})]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Dietary Preferences"}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preferred Diet Type"}),(0,n.jsxs)("select",{value:(null==y?void 0:null===(r=y.preferences)||void 0===r?void 0:r.dietType)||"",onChange:e=>b({...y,preferences:{...null==y?void 0:y.preferences,dietType:e.target.value}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,n.jsx)("option",{value:"",children:"Select a diet"}),Object.keys(c).map(e=>(0,n.jsx)("option",{value:e,children:c[e].split(" - ")[0]},e))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies (comma-separated)"}),(0,n.jsx)("input",{type:"text",value:(null==y?void 0:null===(u=y.preferences)||void 0===u?void 0:null===(s=u.allergies)||void 0===s?void 0:s.join(", "))||"",onChange:e=>b({...y,preferences:{...null==y?void 0:y.preferences,allergies:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}}),placeholder:"e.g., peanuts, shellfish, dairy",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Macro Goals"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Calories"}),(0,n.jsx)("input",{type:"number",value:(null==y?void 0:null===(m=y.macroGoals)||void 0===m?void 0:m.calories)||2e3,onChange:e=>b({...y,macroGoals:{...null==y?void 0:y.macroGoals,calories:parseInt(e.target.value)}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Protein (g)"}),(0,n.jsx)("input",{type:"number",value:(null==y?void 0:null===(x=y.macroGoals)||void 0===x?void 0:x.protein)||150,onChange:e=>b({...y,macroGoals:{...null==y?void 0:y.macroGoals,protein:parseInt(e.target.value)}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carbs (g)"}),(0,n.jsx)("input",{type:"number",value:(null==y?void 0:null===(h=y.macroGoals)||void 0===h?void 0:h.carbs)||200,onChange:e=>b({...y,macroGoals:{...null==y?void 0:y.macroGoals,carbs:parseInt(e.target.value)}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fat (g)"}),(0,n.jsx)("input",{type:"number",value:(null==y?void 0:null===(p=y.macroGoals)||void 0===p?void 0:p.fat)||65,onChange:e=>b({...y,macroGoals:{...null==y?void 0:y.macroGoals,fat:parseInt(e.target.value)}}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]})]})]}),(0,n.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Subscription"}),(0,n.jsxs)("p",{className:"text-gray-600",children:["Current Plan: ",(0,n.jsx)("span",{className:"font-semibold capitalize",children:(null==y?void 0:y.planTier)||"free"})]}),(0,n.jsx)("div",{className:"mt-3 flex gap-3",children:(null==y?void 0:y.planTier)!=="premium"?(0,n.jsx)("button",{type:"button",onClick:()=>f.push("/upgrade"),className:"bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Upgrade to Premium"}):(0,n.jsx)("button",{type:"button",onClick:()=>f.push("/subscription"),className:"bg-gray-700 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Manage Subscription"})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)("button",{type:"submit",disabled:N,className:"w-full bg-primary text-white px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors disabled:bg-gray-300",children:N?"Saving...":"Save Changes"}),(0,n.jsx)("button",{type:"button",onClick:C,className:"w-full bg-gray-200 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors",children:"Sign Out"})]})]})]})})})}},1163:function(e,r,s){e.exports=s(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);