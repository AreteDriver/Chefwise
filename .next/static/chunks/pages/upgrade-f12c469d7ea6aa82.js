(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{4467:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upgrade",function(){return s(3285)}])},5876:function(e,r,s){"use strict";s.d(r,{Z:function(){return x}});var t=s(5893),n=s(1163),a=s(2753),i=s(8232),l=s(7294);function c(e){let{user:r,currentPage:s=""}=e,c=(0,n.useRouter)(),[o,d]=(0,l.useState)(!1),x=async()=>{try{await (0,a.w7)(i.I8),c.push("/")}catch(e){console.error("Sign out error:",e)}},m=[{name:"Home",href:"/",current:"home"===s},{name:"Recipes",href:"/recipes",current:"recipes"===s,requiresAuth:!0},{name:"Pantry",href:"/pantry",current:"pantry"===s,requiresAuth:!0},{name:"Planner",href:"/planner",current:"planner"===s,requiresAuth:!0},{name:"Tracker",href:"/tracker",current:"tracker"===s,requiresAuth:!0},{name:"Profile",href:"/profile",current:"profile"===s,requiresAuth:!0}].filter(e=>!e.requiresAuth||r),h=e=>{d(!1),c.push(e)};return(0,t.jsxs)("nav",{className:"bg-white shadow-sm",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("button",{onClick:()=>h("/"),className:"text-2xl font-bold text-primary hover:text-primary/90 transition-colors",children:"ChefWise"})}),(0,t.jsxs)("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[m.map(e=>(0,t.jsx)("button",{onClick:()=>h(e.href),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(e.current?"bg-primary/10 text-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:e.name},e.name)),r?(0,t.jsx)("button",{onClick:x,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Sign Out"}):(0,t.jsx)("button",{onClick:()=>c.push("/"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Get Started"})]}),(0,t.jsx)("div",{className:"flex md:hidden",children:(0,t.jsxs)("button",{type:"button",onClick:()=>d(!o),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-primary hover:bg-gray-100 transition-colors","aria-expanded":"false",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open main menu"}),o?(0,t.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):(0,t.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]})})]})}),o&&(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[m.map(e=>(0,t.jsx)("button",{onClick:()=>h(e.href),className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(e.current?"bg-primary/10 text-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:e.name},e.name)),r&&(0,t.jsx)("button",{onClick:x,className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors",children:"Sign Out"})]})})]})}var o=s(1158);function d(){let{isOnline:e,pendingSyncCount:r,isSyncing:s,syncError:n,manualSync:a,clearSyncError:i}=(0,o.kH)();return!e||0!==r||n||s?s?(0,t.jsx)("div",{className:"bg-yellow-500 text-white px-4 py-2 text-center text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,t.jsx)("span",{children:"Syncing changes..."})]})}):n?(0,t.jsx)("div",{className:"bg-red-500 text-white px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("span",{children:["Sync error: ",n]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:a,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Retry"}),(0,t.jsx)("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Dismiss",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}):e?r>0?(0,t.jsx)("div",{className:"bg-amber-500 text-white px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("span",{children:[r," pending"," ",1===r?"change":"changes"," to sync"]})]}),(0,t.jsx)("button",{onClick:a,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Sync Now"})]})}):null:(0,t.jsx)("div",{className:"bg-red-600 text-white px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a5 5 0 01-7.072-7.072m0 0l2.829 2.829M3 3l2.829 2.829m0 0a5 5 0 017.072 0"})}),(0,t.jsxs)("span",{children:["You're offline",r>0&&(0,t.jsxs)("span",{className:"ml-1",children:["(",r," pending"," ",1===r?"change":"changes",")"]})]})]}),(0,t.jsx)("span",{className:"text-xs opacity-80",children:"Changes will sync when online"})]})}):null}function x(e){let{children:r,user:s,currentPage:n=""}=e;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d,{}),(0,t.jsx)(c,{user:s,currentPage:n}),(0,t.jsx)("main",{children:r})]})}},3285:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return l}});var t=s(5893),n=s(7294),a=s(1163),i=s(5876);function l(e){let{user:r}=e,s=(0,a.useRouter)(),l=useSubscription(),[c,o]=(0,n.useState)(!1),[d,x]=(0,n.useState)(null);if((0,n.useEffect)(()=>{r||s.push("/")},[r,s]),!r)return s.push("/"),null;let m=[{...SUBSCRIPTION_PLANS.FREE,features:PLAN_FEATURES.FREE,cta:"Current Plan",current:!l.isPremium},{...SUBSCRIPTION_PLANS.PREMIUM,features:PLAN_FEATURES.PREMIUM,cta:l.isPremium?"Current Plan":"Upgrade Now",highlighted:!0,current:l.isPremium}],h=async e=>{if(!e.current&&!c){trackUpgradeClick(e.name,e.price.toString()),o(!0),x(null);try{let e=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r.uid,userEmail:r.email})}),s=await e.json();if(s.error)throw Error(s.error);let t=await stripePromise,{error:n}=await t.redirectToCheckout({sessionId:s.sessionId});if(n)throw n}catch(e){console.error("Error:",e),x(e.message||"Failed to start checkout process")}finally{o(!1)}}};return(0,t.jsx)(i.Z,{user:r,currentPage:"upgrade",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Unlock the full power of AI-driven cooking"})]}),d&&(0,t.jsx)("div",{className:"max-w-md mx-auto mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsx)("p",{className:"text-red-800 text-center",children:d})}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:m.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden ".concat(e.highlighted?"ring-2 ring-primary transform scale-105":""),children:[e.highlighted&&(0,t.jsx)("div",{className:"bg-primary text-white text-center py-2 text-sm font-semibold",children:"MOST POPULAR"}),(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:e.name}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("span",{className:"text-4xl font-bold text-gray-900",children:e.displayPrice}),(0,t.jsx)("span",{className:"text-gray-600",children:e.period})]}),(0,t.jsx)("ul",{className:"space-y-3 mb-8",children:e.features.map((e,r)=>(0,t.jsxs)("li",{className:"flex items-start",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-primary mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,t.jsx)("span",{className:"text-gray-700",children:e})]},r))}),(0,t.jsx)("button",{onClick:()=>h(e),disabled:e.current||c,className:"w-full py-3 px-6 rounded-lg font-semibold transition-colors ".concat(e.current?"bg-gray-200 text-gray-500 cursor-not-allowed":e.highlighted?"bg-primary text-white hover:bg-primary/90 disabled:opacity-50":"bg-gray-100 text-gray-900 hover:bg-gray-200"),children:c&&!e.current?"Processing...":e.cta})]})]},e.name))}),(0,t.jsxs)("div",{className:"mt-12 text-center",children:[(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"All plans include access to our AI recipe generator and nutrition tracking"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Cancel anytime. No hidden fees. 30-day money-back guarantee."})]})]})})}},1163:function(e,r,s){e.exports=s(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4467)}),_N_E=e.O()}]);