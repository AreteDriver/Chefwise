(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(4742)}])},5876:function(e,s,r){"use strict";r.d(s,{Z:function(){return h}});var t=r(5893),n=r(1163),a=r(2753),i=r(8232),l=r(7294);function o(e){let{user:s,currentPage:r=""}=e,o=(0,n.useRouter)(),[c,d]=(0,l.useState)(!1),h=async()=>{try{await (0,a.w7)(i.I8),o.push("/")}catch(e){console.error("Sign out error:",e)}},x=[{name:"Home",href:"/",current:"home"===r},{name:"Recipes",href:"/recipes",current:"recipes"===r,requiresAuth:!0},{name:"Pantry",href:"/pantry",current:"pantry"===r,requiresAuth:!0},{name:"Planner",href:"/planner",current:"planner"===r,requiresAuth:!0},{name:"Tracker",href:"/tracker",current:"tracker"===r,requiresAuth:!0},{name:"Profile",href:"/profile",current:"profile"===r,requiresAuth:!0}].filter(e=>!e.requiresAuth||s),m=e=>{d(!1),o.push(e)};return(0,t.jsxs)("nav",{className:"bg-white shadow-sm",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)("button",{onClick:()=>m("/"),className:"text-2xl font-bold text-primary hover:text-primary/90 transition-colors",children:"ChefWise"})}),(0,t.jsxs)("div",{className:"hidden md:flex md:items-center md:space-x-4",children:[x.map(e=>(0,t.jsx)("button",{onClick:()=>m(e.href),className:"px-3 py-2 rounded-md text-sm font-medium transition-colors ".concat(e.current?"bg-primary/10 text-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:e.name},e.name)),s?(0,t.jsx)("button",{onClick:h,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Sign Out"}):(0,t.jsx)("button",{onClick:()=>o.push("/"),className:"bg-primary text-white px-6 py-2 rounded-lg hover:bg-primary/90 transition-colors",children:"Get Started"})]}),(0,t.jsx)("div",{className:"flex md:hidden",children:(0,t.jsxs)("button",{type:"button",onClick:()=>d(!c),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-primary hover:bg-gray-100 transition-colors","aria-expanded":"false",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open main menu"}),c?(0,t.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}):(0,t.jsx)("svg",{className:"block h-6 w-6",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})})]})})]})}),c&&(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[x.map(e=>(0,t.jsx)("button",{onClick:()=>m(e.href),className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium transition-colors ".concat(e.current?"bg-primary/10 text-primary":"text-gray-700 hover:text-primary hover:bg-gray-50"),children:e.name},e.name)),s&&(0,t.jsx)("button",{onClick:h,className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors",children:"Sign Out"})]})})]})}var c=r(1158);function d(){let{isOnline:e,pendingSyncCount:s,isSyncing:r,syncError:n,manualSync:a,clearSyncError:i}=(0,c.kH)();return!e||0!==s||n||r?r?(0,t.jsx)("div",{className:"bg-yellow-500 text-white px-4 py-2 text-center text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,t.jsx)("span",{children:"Syncing changes..."})]})}):n?(0,t.jsx)("div",{className:"bg-red-500 text-white px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("span",{children:["Sync error: ",n]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:a,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Retry"}),(0,t.jsx)("button",{onClick:i,className:"p-1 hover:bg-white/20 rounded transition-colors","aria-label":"Dismiss",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}):e?s>0?(0,t.jsx)("div",{className:"bg-amber-500 text-white px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("span",{children:[s," pending"," ",1===s?"change":"changes"," to sync"]})]}),(0,t.jsx)("button",{onClick:a,className:"px-3 py-1 bg-white/20 hover:bg-white/30 rounded text-xs font-medium transition-colors",children:"Sync Now"})]})}):null:(0,t.jsx)("div",{className:"bg-red-600 text-white px-4 py-2 text-sm",children:(0,t.jsxs)("div",{className:"flex items-center justify-between max-w-screen-xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a5 5 0 01-7.072-7.072m0 0l2.829 2.829M3 3l2.829 2.829m0 0a5 5 0 017.072 0"})}),(0,t.jsxs)("span",{children:["You're offline",s>0&&(0,t.jsxs)("span",{className:"ml-1",children:["(",s," pending"," ",1===s?"change":"changes",")"]})]})]}),(0,t.jsx)("span",{className:"text-xs opacity-80",children:"Changes will sync when online"})]})}):null}function h(e){let{children:s,user:r,currentPage:n=""}=e;return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d,{}),(0,t.jsx)(o,{user:r,currentPage:n}),(0,t.jsx)("main",{children:s})]})}},4742:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var t=r(5893),n=r(7294),a=r(1163),i=r(2753),l=r(9724),o=r(8232),c=r(5876);function d(e){let{user:s}=e;(0,a.useRouter)();let[r,d]=(0,n.useState)([]),[h,x]=(0,n.useState)(""),[m,u]=(0,n.useState)(!1),p=async()=>{try{let e=new i.hJ,s=await (0,i.rh)(o.I8,e);(await (0,l.QT)((0,l.JU)(o.db,"users",s.user.uid))).exists()||await (0,l.pl)((0,l.JU)(o.db,"users",s.user.uid),{email:s.user.email,displayName:s.user.displayName,planTier:"free",createdAt:new Date().toISOString()})}catch(e){console.error("Sign in error:",e)}},g=async()=>{if(!s){alert("Please sign in first!");return}if(!h.trim())return;let e=[...r,{role:"user",content:h}];d(e),x(""),u(!0);try{let s=await fetch("/api/chat-recipe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})}),r=await s.json();r.message&&d([...e,{role:"assistant",content:r.message}])}catch(s){console.error(s),d([...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}])}finally{u(!1)}};return(0,t.jsx)(c.Z,{user:s,currentPage:"home",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-5xl font-bold mb-4",children:"\uD83C\uDF73 ChefWise"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Your AI Cooking Assistant"})]}),s?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white p-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Chat with ChefWise \uD83D\uDC68â€\uD83C\uDF73"}),(0,t.jsx)("p",{className:"text-sm opacity-90",children:"Ask me about recipes, cooking tips, or what to make!"})]}),(0,t.jsxs)("div",{className:"h-96 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[0===r.length&&(0,t.jsxs)("div",{className:"text-center text-gray-500 mt-20",children:[(0,t.jsxs)("p",{className:"text-lg mb-4",children:["\uD83D\uDC4B Hi ",s.displayName,"! I'm your AI cooking assistant."]}),(0,t.jsx)("p",{className:"mb-2",children:"Try asking me:"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsx)("p",{children:'"What can I make with chicken and rice?"'}),(0,t.jsx)("p",{children:'"I want a quick dinner recipe"'}),(0,t.jsx)("p",{children:'"Give me 3 healthy lunch options"'})]})]}),r.map((e,s)=>(0,t.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,t.jsx)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-blue-600 text-white":"bg-white border border-gray-200 text-gray-800"),children:(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.content})})},s)),m&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"bg-white border border-gray-200 px-4 py-2 rounded-lg",children:(0,t.jsx)("p",{className:"text-gray-500",children:"ChefWise is thinking..."})})})]}),(0,t.jsx)("div",{className:"border-t border-gray-200 p-4 bg-white",children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("textarea",{value:h,onChange:e=>x(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:"Ask me anything about cooking...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:1}),(0,t.jsx)("button",{onClick:g,disabled:m||!h.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:"Send"})]})})]}):(0,t.jsxs)("div",{className:"text-center bg-white rounded-lg shadow-lg p-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Get Started"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Sign in to chat with your AI cooking assistant"}),(0,t.jsx)("button",{onClick:p,className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg text-lg font-semibold transition-colors",children:"Sign In with Google"})]})]})})}},1163:function(e,s,r){e.exports=r(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);