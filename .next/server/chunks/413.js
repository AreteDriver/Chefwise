exports.id=413,exports.ids=[413],exports.modules={8275:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(997),s=r(6689);function n(){let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),i=async()=>{if(!e)return;o(!0),e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r&&n(!1),t(null),o(!1)};return r?a.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 p-4 md:p-0 md:bottom-4 md:left-auto md:right-4 md:w-96",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gradient-to-r from-primary to-secondary px-4 py-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/icons/icon-72.png",alt:"ChefWise",className:"w-10 h-10 rounded-lg"}),(0,a.jsxs)("div",{className:"text-white",children:[a.jsx("h4",{className:"font-semibold",children:"Install ChefWise"}),a.jsx("p",{className:"text-sm text-white/80",children:"Add to your home screen"})]})]})}),(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Install our app for quick access, offline support, and a better experience."}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1 mb-4",children:[(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Works offline"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Fast and lightweight"]}),(0,a.jsxs)("li",{className:"flex items-center gap-2",children:[a.jsx("svg",{className:"w-4 h-4 text-primary",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"No app store needed"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:i,disabled:l,className:"flex-1 bg-primary text-white px-4 py-2 rounded-lg font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:l?"Installing...":"Install"}),a.jsx("button",{onClick:()=>{n(!1),localStorage.setItem("chefwise-install-dismissed",Date.now().toString())},className:"px-4 py-2 text-gray-600 rounded-lg font-medium hover:bg-gray-100 transition-colors",children:"Not now"})]})]})]})}):null}},3262:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(997),s=r(6689);function n(){let[e,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(null),l=()=>{t(!1)};return e?a.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50",children:a.jsx("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"Update Available"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"A new version of ChefWise is ready. Refresh to get the latest features and improvements."}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:()=>{r&&r.postMessage({type:"SKIP_WAITING"})},className:"px-3 py-1.5 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primary/90 transition-colors",children:"Refresh Now"}),a.jsx("button",{onClick:l,className:"px-3 py-1.5 text-gray-600 text-sm font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Later"})]})]}),a.jsx("button",{onClick:l,className:"flex-shrink-0 text-gray-400 hover:text-gray-600","aria-label":"Dismiss",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}):null}},8084:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{I:()=>i,kH:()=>c});var s=r(997),n=r(6689),l=r(5397),o=e([l]);l=(o.then?(await o)():o)[0];let d=(0,n.createContext)(null);function i({children:e}){let[t,r]=(0,n.useState)("undefined"==typeof navigator||navigator.onLine),[a,o]=(0,n.useState)(0),[i,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(null),[f,h]=(0,n.useState)(null);(0,n.useRef)(null);let p=(0,n.useCallback)(async()=>{if(!t||i)return{success:0,failed:0};c(!0),h(null);try{let e=await l.mK.processQueue((e,t)=>{console.log(`[NetworkStatus] Synced ${e}/${t}`)}),t=await l.mK.getPendingCount();return o(t),m(Date.now()),e.failed>0&&h(`${e.failed} item(s) failed to sync`),e}catch(e){return console.error("[NetworkStatus] Sync failed:",e),h(e.message),{success:0,failed:0}}finally{c(!1)}},[t,i]),x=(0,n.useCallback)(()=>{h(null)},[]),g=(0,n.useCallback)(()=>{o(e=>e+1)},[]),y=(0,n.useCallback)(()=>{o(e=>Math.max(0,e-1))},[]);return s.jsx(d.Provider,{value:{isOnline:t,pendingSyncCount:a,isSyncing:i,lastSyncTime:u,syncError:f,manualSync:p,clearSyncError:x,incrementPendingCount:g,decrementPendingCount:y},children:e})}function c(){let e=(0,n.useContext)(d);if(!e)throw Error("useNetworkStatus must be used within a NetworkStatusProvider");return e}a()}catch(e){a(e)}})},2547:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var a=r(997),s=r(6689);let n=(0,s.createContext)();function l({children:e}){let[t,r]=(0,s.useState)({}),l=(0,s.useCallback)((e,t)=>{r(r=>({...r,[e]:t}))},[]),o=(0,s.useCallback)(e=>t[e]||null,[t]),i=(0,s.useCallback)(e=>{r(t=>{let r={...t};return delete r[e],r})},[]),c=(0,s.useCallback)(()=>{r({})},[]);return a.jsx(n.Provider,{value:{savePageState:l,getPageState:o,clearPageState:i,clearAllPageStates:c},children:e})}},2169:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{I8:()=>m,db:()=>f,wk:()=>h});var s=r(3745),n=r(401),l=r(1492),o=r(8937),i=r(3392),c=r(9500),d=e([s,n,l,o,i,c]);[s,n,l,o,i,c]=d.then?(await d)():d;let u=(0,s.initializeApp)({apiKey:"ROTATE_ME_GET_NEW_KEY_FROM_FIREBASE_CONSOLE",authDomain:"chefwise-test.firebaseapp.com",projectId:"chefwise-test",storageBucket:"chefwise-test.firebasestorage.app",messagingSenderId:"937531950728",appId:"1:937531950728:web:58165872399c095583813d"}),m=(0,n.getAuth)(u),f=(0,l.getFirestore)(u),h=(0,o.getFunctions)(u);(0,i.getStorage)(u),a()}catch(e){a(e)}})},9413:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>f});var s=r(997);r(108);var n=r(6689),l=r(401),o=r(2169),i=r(2547),c=r(8084),d=r(3262),u=r(8275),m=e([l,o,c]);function f({Component:e,pageProps:t}){let[r,a]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0);return l?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s.jsx(c.I,{children:(0,s.jsxs)(i.M,{children:[s.jsx(e,{...t,user:r}),s.jsx(d.Z,{}),s.jsx(u.Z,{})]})})}[l,o,c]=m.then?(await m)():m,a()}catch(e){a(e)}})},215:(e,t,r)=>{"use strict";r.d(t,{Nf:()=>l,RF:()=>a});let a={PANTRY:"pantry",RECIPES:"recipes",MEAL_PLANS:"mealPlans",SYNC_QUEUE:"syncQueue"},s=null;async function n(){return s||new Promise((e,t)=>{t(Error("IndexedDB not available"))})}let l={get:async function(e,t){let r=await n();return new Promise((a,s)=>{let n=r.transaction([e],"readonly").objectStore(e).get(t);n.onerror=()=>s(n.error),n.onsuccess=()=>a(n.result||null)})},getAll:async function(e){let t=await n();return new Promise((r,a)=>{let s=t.transaction([e],"readonly").objectStore(e).getAll();s.onerror=()=>a(s.error),s.onsuccess=()=>r(s.result||[])})},getByIndex:async function(e,t,r){let a=await n();return new Promise((s,n)=>{let l=a.transaction([e],"readonly").objectStore(e).index(t).getAll(r);l.onerror=()=>n(l.error),l.onsuccess=()=>s(l.result||[])})},put:async function(e,t){let r=await n();return new Promise((a,s)=>{let n=r.transaction([e],"readwrite").objectStore(e).put(t);n.onerror=()=>s(n.error),n.onsuccess=()=>a(n.result)})},putMany:async function(e,t){let r=await n();return new Promise((a,s)=>{let n=r.transaction([e],"readwrite"),l=n.objectStore(e);n.oncomplete=()=>a(),n.onerror=()=>s(n.error),t.forEach(e=>l.put(e))})},remove:async function(e,t){let r=await n();return new Promise((a,s)=>{let n=r.transaction([e],"readwrite").objectStore(e).delete(t);n.onerror=()=>s(n.error),n.onsuccess=()=>a()})},clear:async function(e){let t=await n();return new Promise((r,a)=>{let s=t.transaction([e],"readwrite").objectStore(e).clear();s.onerror=()=>a(s.error),s.onsuccess=()=>r()})},count:async function(e){let t=await n();return new Promise((r,a)=>{let s=t.transaction([e],"readonly").objectStore(e).count();s.onerror=()=>a(s.error),s.onsuccess=()=>r(s.result)})},closeDB:function(){s&&(s.close(),s=null)},STORES:a}},5397:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{NH:()=>p,mK:()=>y});var s=r(215),n=r(1492),l=r(2169),o=e([n,l]);[n,l]=o.then?(await o)():o;let p={CREATE:"create",UPDATE:"update",DELETE:"delete"},x={PENDING:"pending",IN_PROGRESS:"in_progress",COMPLETED:"completed",FAILED:"failed"},g={pantry:"pantryItems",recipes:"recipes",mealPlans:"mealPlans"};async function i(){return(await s.Nf.getAll(s.RF.SYNC_QUEUE)).filter(e=>e.status===x.PENDING||e.status===x.FAILED).length}async function c(){return(await s.Nf.getAll(s.RF.SYNC_QUEUE)).filter(e=>e.status===x.PENDING||e.status===x.FAILED).sort((e,t)=>e.timestamp-t.timestamp)}async function d(e){let t=await c();if(0===t.length)return{success:0,failed:0};console.log("[SyncQueue] Processing",t.length,"pending operations");let r=0,a=0;for(let n=0;n<t.length;n++){let l=t[n];try{await s.Nf.put(s.RF.SYNC_QUEUE,{...l,status:x.IN_PROGRESS}),await u(l),await s.Nf.remove(s.RF.SYNC_QUEUE,l.id),r++,console.log("[SyncQueue] Synced:",l.type,l.collection)}catch(r){console.error("[SyncQueue] Failed to sync:",r);let e=l.retryCount+1,t=e>=3?x.FAILED:x.PENDING;await s.Nf.put(s.RF.SYNC_QUEUE,{...l,status:t,retryCount:e,error:r.message}),a++}e&&e(n+1,t.length)}return{success:r,failed:a}}async function u(e){let t=g[e.collection];if(!t)throw Error(`Unknown collection: ${e.collection}`);switch(e.type){case p.CREATE:{let r=await (0,n.addDoc)((0,n.collection)(l.db,t),{...e.data,createdAt:new Date().toISOString()});console.log("[SyncQueue] Created document:",r.id);break}case p.UPDATE:{if(!e.docId)throw Error("Document ID required for update operation");let r=(0,n.doc)(l.db,t,e.docId);await (0,n.updateDoc)(r,{...e.data,updatedAt:new Date().toISOString()});break}case p.DELETE:{if(!e.docId)throw Error("Document ID required for delete operation");let r=(0,n.doc)(l.db,t,e.docId);await (0,n.deleteDoc)(r);break}default:throw Error(`Unknown operation type: ${e.type}`)}}async function m(e){for(let e of(await s.Nf.getAll(s.RF.SYNC_QUEUE)).filter(e=>e.status===x.FAILED&&e.retryCount<3))await s.Nf.put(s.RF.SYNC_QUEUE,{...e,status:x.PENDING});return d(e)}async function f(){for(let e of(await s.Nf.getAll(s.RF.SYNC_QUEUE)).filter(e=>e.status===x.COMPLETED))await s.Nf.remove(s.RF.SYNC_QUEUE,e.id)}async function h(){await s.Nf.clear(s.RF.SYNC_QUEUE)}let y={queueOperation:async function(e){let t={...e,timestamp:Date.now(),status:x.PENDING,retryCount:0,error:null},r=await s.Nf.put(s.RF.SYNC_QUEUE,t);if(console.log("[SyncQueue] Queued operation:",e.type,e.collection),"serviceWorker"in navigator&&"SyncManager"in window)try{let e=await navigator.serviceWorker.ready;await e.sync.register("sync-pantry")}catch(e){console.log("[SyncQueue] Background sync not available:",e.message)}return r},getPendingCount:i,getPendingOperations:c,processQueue:d,retryFailed:m,clearCompleted:f,clearAll:h,OPERATION_TYPES:p,SYNC_STATUS:x};a()}catch(e){a(e)}})},108:()=>{}};